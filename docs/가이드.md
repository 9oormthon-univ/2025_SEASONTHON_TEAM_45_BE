### **환자용 주요 기능 정의**

1. **회원가입 및 로그인**
    - 로컬 로그인을 연동한 간편 가입/로그인 기능 제공
2. **AI 증상 확인 및 병원 예약**
    - **AI 증상 확인:** 간단한 질의응답(챗봇)을 통해 예상 질환 및 추천 진료과를 안내하여, 환자가 적합한 진료를 예약할 수 있도록 지원.
    - **병원/진료과 예약:** 병원, 진료과, 날짜/시간 선택을 통한 간편 예약 기능.
3. **자동 체크인 (핵심 기능)**
    - **기술:** 저전력 블루투스(BLE) 기반 비콘(Beacon) 활용.
    - **동작:** 사용자가 앱 설치 및 블루투스 활성화 상태로 병원 내 특정 구역(예: 정문, 해당 진료과 입구) 진입 시, 비콘 신호를 감지하여 서버에 자동으로 '도착' 상태를 전송. 별도의 키오스크 조작이나 QR코드 스캔이 필요 없음.
4. **실시간 대기 현황 안내**
    - 환자는 진료실 앞에서 기다릴 필요 없이, 병원 내 카페나 편의 공간에서 자유롭게 대기 가능.
5. **개인 맞춤형 스마트 호출 (핵심 기능)**
    - 자신의 진료 순서가 되면 스마트폰에 **푸시 알림(Push Notification)** 호출.
    - 알림 메시지: "OOO님, 2번 진료실로 들어오세요." 와 같이 명확한 안내 제공.
    - 마스크를 쓰거나 주변 소음이 심해도 놓칠 염려가 없음.

### **환자용 앱 시나리오**

**[앱 실행] → [로그인/회원가입] → [홈 화면] → [병원 예약] → [병원 방문 및 자동 체크인] → [대기] → [호출 및 진료]**

1. **로그인/회원가입:** 최초 1회 본인 인증 및 로그인.
2. **홈 화면:**
    - 가장 가까운 예약 정보가 카드 형태로 노출.
    - 'AI 증상 확인', '병원 예약하기' 버튼 제공.
3. **AI 증상 확인 및 예약 or 예약하기:**
    - (AI 예약) 챗봇과 대화하며 증상을 입력하고, 추천 진료과를 통해 예약 진행.
    - (일반 예약) 병원, 진료과, 의사, 시간을 선택하여 예약 완료.
4. **병원 입구 진입 (자동 체크인):**
    - 예약 당일, 환자가 병원 로비나 해당 병동 입구에 들어서는 순간, 설치된 비콘이 스마트폰 앱 신호를 감지.
    - **앱 화면 자동 전환:** "OOO님, OOO병원에 도착하셨습니다. 자동으로 접수(체크인) 되었습니다." 라는 안내 메시지 표시.
5. **대기 중:**
    - 앱 화면이 '대기 현황판'으로 변경됨.
    - ~~실시간으로 "내 순서: O번째", "예상 대기시간: OO분" 등의 정보 업데이트.~~
6. **호출:**
    - 진료 순서가 되면 스마트폰 전체 화면에 푸시 알림 발생.
    - **알림:** "OOO님, 지금 바로 O번 창구(또는 O번 진료실)로 이동해주세요."
    - 환자는 알림을 확인하고 해당 장소로 이동.

### 병원용 주요 기능 정의

- **관리자 로그인**
    - 병원 관계자(접수데스크, 간호사 등)에게 부여된 아이디/비밀번호로 로그인.
- **환자 대기 관리 대시보드 (핵심 기능)**
    - **실시간 현황판:** 지정된 진료과의 전체 예약 환자 목록을 실시간으로 표시.
    - **상태 구분:** 환자의 상태를 직관적인 UI(색상, 아이콘)로 구분하여 표시.
        - `예약`: 아직 병원에 도착하지 않은 상태
        - **`도착(체크인)`**: 앱을 통해 자동으로 도착이 확인된 상태
        - `호출`: 호출을 요청한 상태
        - `~~진료 중`: 현재 진료실에 있는 상태~~
        - `~~진료 완료`: 진료가 끝난 상태~~
        - `~~호출 누락`: 호출했으나 응답이 없는 경우~~
    - 이를 통해 '노쇼' 환자를 호명하는 실수를 원천적으로 방지.
- **원클릭 스마트 호출 (핵심 기능)**
    - 대시보드에서 다음 순서의 '도착' 상태인 환자 옆에 있는 **[호출]** 버튼을 클릭.
    - 클릭 즉시 해당 환자의 스마트폰으로 호출 푸시 알림이 전송됨.
    - 별도로 마이크에 대고 환자 이름을 부를 필요가 없어, 의료진의 피로도 감소 및 정보보호 강화.
- **수동 관리 기능**
    - 앱 미설치자, 스마트폰 미소지자, 고령층 등 디지털 약자를 위해 수동으로 상태를 변경하는 기능.
    - 예: 환자가 데스크에 직접 와서 도착을 알리면, 직원이 웹에서 해당 환자의 상태를 '예약'에서 '도착'으로 수동 변경.
- **사용자 커스텀 관리자 페이지 (필수 기능)**
    - **권한 관리:** 직원 계정 생성, 수정, 삭제 및 역할(원무과, 진료실 등)에 따른 페이지 접근 권한 설정.
    - **~~통계 및 리포트:** 일별/주별/월별 환자 방문 수, 평균 대기 시간, 노쇼 비율 등 운영에 필요한 데이터를 시각화하여 제공.~~

### 병원용 웹 시나리오

**[관리자 페이지 접속] → [로그인] → [환자 대기 관리 페이지] → [실시간 현황 파악] → [환자 호출] → [업무 반복]**

1. **로그인:** 담당자(간호사, 데스크 직원)가 자신의 계정으로 웹 시스템에 로그인.
2. **환자 대기 관리 페이지 (대시보드):**
    - 로그인하면 담당 진료과의 환자 대기 목록이 기본 화면으로 나타남.
    - 환자 이름, 예약 시간, 그리고 실시간 '상태'가 표시됨.
    - 환자가 병원에 들어오면, 해당 환자의 '상태'가 자동으로 `예약`에서 `도착(체크인)`으로 변경되는 것을 확인.
3. **환자 호출:**
    - 이전 환자의 진료가 끝나면, 대기 목록 최상단에 있는 `도착(체크인)` 상태의 환자 옆 **[호출]** 버튼을 클릭.
    - 클릭과 동시에 환자의 상태는 `진료 중`으로 자동 변경됨.
4. **상태 확인 및 반복:**
    - 호출된 환자가 진료실로 들어오는 것을 확인.
    - 진료가 끝나면 [진료 완료] 버튼을 누르거나, 다음 환자를 호출하면 이전 환자는 자동으로 '진료 완료' 상태로 변경되도록 설정.
    - 이 과정을 반복하며 효율적으로 환자를 관리.

### 흐름도

1. 앱 로그인  → 앱으로 병원에 예약접수(날짜, 시간)
2. 웹에 예약알림이 뜨고 (POST) 병원에서 웹으로 수락
3. 앱에 예약 확인이 뜬 다음
4. 예약한 시간에 병원을 찾아가면 BLE비콘신호(플레이스토어 앱 사용) 신호 세짐
5. 앱이 ble 신호감지해서 환자가 병원에 왔다는것을 앱이 자동 post로 병원 웹에 환자가 도착했다는것을 인지하고 순번이 다가오면 웹에서 그 환자 순번 차례라고 앱에 알림이 뜨게 해서 호출할 수 있도록